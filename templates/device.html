{% extends "base.html" %}

{% block content %}

{% if device_details %}
    {% for detail in device_details %}


    <h3>BISMark Device: {{ detail.deviceid }}</h3>
    <table>
        <tr><td>MAC Address</td><td>{{ detail.macid }}</td></tr>
        <tr><td>Type</td><td>{{ detail.type }}</td></tr>
        <tr><td>Operating System</td><td>{{ detail.os }}</td></tr>
    </table>
    {% endfor %}
{% else %}
    <p>Device info is not available.</p>
{% endif %}

<script type="text/javascript" src="http://danvk.org/dygraphs/dygraph-combined.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<DIV>
<SELECT id = "paramselect">
<OPTION value="RTT">Round trip time
<OPTION value="LMRTT">LM Round trip time
<OPTION value="AGGL3BITRATE">AGGL3 Bit Rate

</SELECT>

<INPUT type="button" value="render" name="b_render" onClick="render()">

<div id="graphdiv" style="width: 900px;"></div>
<script type="text/javascript">
	var content="[not loaded]";

	var loc = window.location.href;
	spl = loc.split('/');

	if(spl[spl.length-1].length>2) loc="/data_chart/"+spl[spl.length-1];
	else loc="/data_chart/"+spl[spl.length-2];
       	


        function OnSuccess(data)
        {
          content=data;
	  g = new Dygraph(document.getElementById("graphdiv"),content,{
	      	rollPeriod: 1,
		errorBars: true,
	      	showRoller: true,


	    		}
		);
        }
	
        function OnError(data)
        {
	  alert("data loading failed");
        }
	

	function render()
	{

	$.ajax({
                type: "POST",
                url: loc,
                data: {'param': paramselect.value},
                success: OnSuccess,
            });
      
	}
	
</script>




{% endblock %}
